<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head> 

    <title>Getting Started: Serving Web Content</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <style>
    
    		table{
			border-collapse: collapse;
			}
			
			th, td{
			border: 1px solid red;
			padding: 8px;
			}
			
    </style>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <script>
		$( document ).ready( function() {
    	
    		$( '#piesk' ).click ( function() {
    		
				$.ajax(
					{
						url: '/greeting'
						, success: function(greeting){
						
				    		var canvas = document.getElementById("remelis");
							var ctx = canvas.getContext("2d");
							
							ctx.beginPath();
							ctx.moveTo(200, 0);
							ctx.lineTo(200, 400);
							ctx.moveTo(0, 200);
							ctx.lineTo(400, 200);							
							ctx.stroke();
							
							for ( i = 0; i < greeting.length; i++ ) {
								ctx.beginPath();
								//ctx.moveTo(200 + apskritimas[i].x + apskritimas[i].radius, 400 - apskritimas[i].y);
								ctx.arc( 
									200 + 2 * parseInt ( "${apskritimas.x}" )
									, 200 - 2 * parseInt ( "${apskritimas.y}" )
									, parseInt ( "${apskritimas.radius}" )
									, 0
									, 2 * Math.PI
								);
								ctx.stroke();
							}
														
							// ctx.fillStyle = "#FF0000";
							// ctx.fillRect(0, 0, 150, 75);
				  		}
				 	}
				);
    		});
    	});
    				
    </script>
    
</head>
<body>
    <p th:text="'Hello, ' + ${name} + '!'" /> <br>
    
    <div id="lentele">
    	<table>
    
    		<tr><th>x</th><th>y</th><th>radius</th></tr>
    	
    		<tr th:each="apskritimas : ${apskritimai}">
    			<td th:text="${apskritimas.x}"></td>
    			<td th:text="${apskritimas.y}"></td>
  				<td th:text="${apskritimas.radius}"></td>
  			</tr>
  		
  		</table>
 	</div>
 	
 	<br>
 	
	  <input type="button" id="piesk" value="Piesti">
	  
	  <br>
	  
	  <canvas id="remelis" width="400" height="400">
	  </canvas>
	
</body>
</html>
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head> 

    <title>Getting Started: Serving Web Content</title> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
    <style>
    
    		table{
    		
			border-collapse: collapse;
			
			}
			
			th, td{
			
			border: 1px solid red;
			padding: 8px;
			
			}
			
    </style>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <script>
		$( document ).ready( function() {
    	
    		$( '#piesk' ).click ( function() {
    		
				$.ajax(
					{
						
						url: '/apskritimai'
						, success: function(apskritimai){
						
				    		var canvas = document.getElementById("remelis");
							var ctx = canvas.getContext("2d");
							
							ctx.beginPath();
							ctx.moveTo(200, 0);
							ctx.lineTo(200, 400);
							ctx.moveTo(0, 200);
							ctx.lineTo(400, 200);							
							ctx.stroke();
							
							apskritimu_lentele = '<table><tr><th>x</th><th>y</th><th>radius</th></tr>';
							
							for ( i = 0; i < apskritimai.length; i++ ) {
								ctx.beginPath();
								//ctx.moveTo(200 + apskritimai[i].x + apskritimai[i].radius, 400 - apskritimai[i].y);
								ctx.arc( 
									200 + 2 * parseInt ( apskritimai[i].x )
									, 200 - 2 * parseInt ( apskritimai[i].y )
									, parseInt ( apskritimai[i].radius )
									, 0
									, 2 * Math.PI
								);
								ctx.stroke();
								
								apskritimu_lentele += '<tr><td>' + apskritimai[i].x + '</td><td>' +  apskritimai[i].y + '</td><td>' + apskritimai[i].radius + '</td></tr>' ;
								
							}
							
							apskritimu_lentele += '</table>';
													
							// ctx.fillStyle = "#FF0000";
							// ctx.fillRect(0, 0, 150, 75);
							
							apskritimai = document.getElementById( 'lentele' );
							apskritimai.innerHTML = apskritimu_lentele;
				  		}
				 	}
				);
    		});	
		});
    				
    </script>
    
</head>
<body>
    <p th:text="'Hello, ' + ${name} + '!'" /> <br>
    
    <input type="button" id="piesk" value="Piesti">

 	<br>
 	
    <div id="lentele">
 	</div>
 		
	  
	 <br>
	  
	 <canvas id="remelis" width="400" height="400">
	 </canvas>
	
</body>
</html>